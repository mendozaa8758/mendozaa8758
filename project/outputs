<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pokémon Team Generator | MVP</title>
    <style>
        /* === Embedded CSS for Styling === */
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: #f0f4f8;
            color: #333;
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
        }

        .container {
            background-color: #fff;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            max-width: 900px;
            width: 100%;
        }

        h1 {
            color: #cc0000; /* Pokémon Red */
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 2px solid #ccc;
            padding-bottom: 10px;
        }

        /* --- Controls Section --- */
        .controls {
            display: flex;
            gap: 15px;
            align-items: center;
            justify-content: center;
            margin-bottom: 30px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background-color: #fafafa;
        }

        label {
            font-weight: bold;
            color: #555;
        }

        select, button {
            padding: 10px 15px;
            border-radius: 6px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.2s, transform 0.1s;
        }

        select {
            border: 1px solid #ccc;
            min-width: 200px;
            background-color: white;
        }

        .generate-btn {
            background-color: #3b4cca; /* Pokémon Blue */
            color: white;
            border: none;
            font-weight: bold;
        }

        .generate-btn:hover {
            background-color: #2c3a9f;
            transform: translateY(-1px);
        }

        .generate-btn:active {
            transform: translateY(1px);
        }

        /* --- Team Display Section --- */
        #team-display {
            margin-top: 20px;
            min-height: 150px; /* Reserve space */
        }

        .pokemon-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            padding: 0;
            list-style: none;
        }

        .pokemon-card {
            background-color: #f7f7f7;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
        }

        .pokemon-card h3 {
            margin-top: 0;
            margin-bottom: 5px;
            color: #cc0000;
        }

        .pokemon-card p {
            margin: 3px 0;
            font-size: 0.95em;
        }

        .type-pill {
            display: inline-block;
            padding: 3px 8px;
            margin-right: 5px;
            border-radius: 12px;
            font-size: 0.8em;
            font-weight: bold;
            color: white;
            background-color: #555; /* Neutral fallback */
        }

        /* Basic Type Colors (Simple representation) */
        .type-Normal { background-color: #A8A878; }
        .type-Fire { background-color: #F08030; }
        .type-Water { background-color: #6890F0; }
        .type-Electric { background-color: #F8D030; }
        .type-Grass { background-color: #78C850; }
        .type-Ice { background-color: #98D8D8; }
        .type-Fighting { background-color: #C03028; }
        .type-Poison { background-color: #A040A0; }
        .type-Ground { background-color: #E0C068; }
        .type-Flying { background-color: #A890F0; }
        .type-Psychic { background-color: #F85888; }
        .type-Bug { background-color: #A8B820; }
        .type-Rock { background-color: #B8A038; }
        .type-Ghost { background-color: #705898; }
        .type-Dragon { background-color: #7038F8; }
        .type-Dark { background-color: #705848; }
        .type-Steel { background-color: #B8B8D0; }
        .type-Fairy { background-color: #EE99AC; }


        /* --- Export/Copy Section --- */
        .export-section {
            text-align: center;
            margin-top: 25px;
        }

        #copy-button {
            background-color: #4CAF50; /* Green */
            color: white;
            border: none;
            margin-bottom: 15px;
        }

        #copy-button:hover {
            background-color: #45a049;
            transform: translateY(-1px);
        }

        #copy-button:active {
            transform: translateY(1px);
        }

        /* Feedback for copy */
        #copy-feedback {
            display: block;
            margin-top: 10px;
            color: #4CAF50;
            font-weight: bold;
            visibility: hidden;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .visible {
            visibility: visible !important;
            opacity: 1 !important;
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>Pokémon Team Generator</h1>

        <div class="controls">
            <label for="format-select">Format/Style:</label>
            <select id="format-select">
                <option value="OU_BALANCED">Singles OU - Balanced</option>
                <option value="OU_OFFENSIVE">Singles OU - Offensive</option>
                <option value="VGC_BALANCED">VGC Doubles - Balanced</option>
                <option value="CASUAL_RANDOM">Random Casual</option>
            </select>
            <button class="generate-btn" id="generate-button">Generate Team</button>
        </div>

        <div id="team-display">
            <p style="text-align: center; color: #777;">Select a format and click 'Generate Team' to start!</p>
            <ul class="pokemon-list" id="pokemon-list-container">
                </ul>
        </div>

        <div class="export-section">
            <button id="copy-button" style="display: none;">Copy Team to Clipboard</button>
            <span id="copy-feedback">Team copied!</span>
        </div>

    </div>

    <script>
        // === Embedded JavaScript for Client-Side Logic ===

        // --- 1. Pokémon Data (Simplified for MVP) ---
        /* * Data structure for Pokémon. Includes name, type(s), a simple role, 
         * and the format pool it belongs to (OU or VGC).
         */
        const POKEMON_DATA = [
            // OU Singles Pool (Balanced/Offensive)
            { name: "Landorus-T", types: ["Ground", "Flying"], role: "Pivot/Defogger", pool: "OU" },
            { name: "Heatran", types: ["Fire", "Steel"], role: "Specially Defensive Tank", pool: "OU" },
            { name: "Clefable", types: ["Fairy"], role: "Support/Cleric", pool: "OU" },
            { name: "Weavile", types: ["Dark", "Ice"], role: "Physical Sweeper", pool: "OU" },
            { name: "Toxapex", types: ["Poison", "Water"], role: "Physical Wall", pool: "OU" },
            { name: "Dragapult", types: ["Dragon", "Ghost"], role: "Special Attacker", pool: "OU" },
            { name: "Tapu Koko", types: ["Electric", "Fairy"], role: "Revenge Killer", pool: "OU" },
            { name: "Ferrothorn", types: ["Grass", "Steel"], role: "Hazard Setter", pool: "OU" },
            { name: "Cinderace", types: ["Fire"], role: "Physical Attacker", pool: "OU" },
            { name: "Garchomp", types: ["Dragon", "Ground"], role: "Wallbreaker", pool: "OU" },
            
            // VGC Doubles Pool
            { name: "Incineroar", types: ["Fire", "Dark"], role: "Intimidate Support", pool: "VGC" },
            { name: "Rillaboom", types: ["Grass"], role: "Terrain Setter", pool: "VGC" },
            { name: "Regieleki", types: ["Electric"], role: "Speed Control", pool: "VGC" },
            { name: "Porygon2", types: ["Normal"], role: "Trick Room Tank", pool: "VGC" },
            { name: "Kartana", types: ["Grass", "Steel"], role: "Fast Sweeper", pool: "VGC" },
            { name: "Calyrex-S", types: ["Psychic", "Ghost"], role: "Offensive Powerhouse", pool: "VGC" },

            // Casual Pool (All Pokémon are available in this pool for diversity)
            { name: "Mewtwo", types: ["Psychic"], role: "Legendary Sweeper", pool: "CASUAL" },
            { name: "Snorlax", types: ["Normal"], role: "Special Wall", pool: "CASUAL" },
            { name: "Arcanine", types: ["Fire"], role: "Support/Utility", pool: "CASUAL" },
            { name: "Gardevoir", types: ["Psychic", "Fairy"], role: "Special Attacker", pool: "CASUAL" },
            { name: "Swampert", types: ["Water", "Ground"], role: "Mega Pivot", pool: "CASUAL" },
            { name: "Aegislash", types: ["Steel", "Ghost"], role: "Stance Changer", pool: "CASUAL" },
        ];

        // --- 2. Configuration and Roles ---
        const TEAM_SIZE = 6;
        
        // Define desired roles for a 'Balanced' team composition
        const BALANCED_ROLES = ["Tank", "Wallbreaker", "Sweeper", "Pivot", "Support", "Utility"];
        
        // Define desired roles for an 'Offensive' team composition (more attackers)
        const OFFENSIVE_ROLES = ["Sweeper", "Wallbreaker", "Revenge Killer", "Attacker", "Pivot", "Attacker"];

        // Helper function to get a random element from an array
        const getRandomElement = (arr) => arr[Math.floor(Math.random() * arr.length)];

        // Helper function to shuffle an array (Fisher-Yates)
        const shuffleArray = (array) => {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        };

        // --- 3. Core Engine: Team Generation (Feature 1) ---
        const generateTeam = () => {
            const formatStyle = document.getElementById('format-select').value;
            const selectedPool = formatStyle.split('_')[0]; // e.g., 'OU', 'VGC', 'CASUAL'
            const style = formatStyle.split('_')[1];     // e.g., 'BALANCED', 'OFFENSIVE', 'RANDOM'

            // Filter the master list based on the format pool
            let availablePokemon = POKEMON_DATA.filter(p => p.pool.includes(selectedPool) || selectedPool === "CASUAL");

            // If the pool is too small (e.g., VGC pool only has 6+ members), use the whole OU pool
            if (availablePokemon.length < TEAM_SIZE) {
                availablePokemon = POKEMON_DATA.filter(p => p.pool.includes("OU") || selectedPool === "VGC");
            }
            
            if (availablePokemon.length < TEAM_SIZE) {
                 // Failsafe: Use all available Pokémon if the pool is too small
                availablePokemon = POKEMON_DATA.slice(); 
            }

            // Shuffle the pool for basic randomness
            shuffleArray(availablePokemon);

            let newTeam = [];
            let requiredRoles = [];
            
            // Set the roles based on the selected style
            if (style === "BALANCED" || selectedPool === "VGC") {
                // VGC often requires a more balanced approach by default
                requiredRoles = shuffleArray([...BALANCED_ROLES]); 
            } else if (style === "OFFENSIVE") {
                requiredRoles = shuffleArray([...OFFENSIVE_ROLES]);
            }

            const isRandom = style === "RANDOM" || requiredRoles.length === 0;

            // Simple Role-Based Selection (for Balanced/Offensive)
            if (!isRandom) {
                // Attempt to fulfill role requirements
                for (let i = 0; i < TEAM_SIZE; i++) {
                    // Try to find a Pokémon whose role *contains* the required role (e.g., "Pivot/Defogger" contains "Pivot")
                    const role = requiredRoles[i];
                    
                    // Filter out already selected Pokémon and those that roughly match the role
                    const candidates = availablePokemon.filter(p => 
                        !newTeam.includes(p) && p.role.includes(role.split('/')[0])
                    );

                    let chosenMon;
                    if (candidates.length > 0) {
                        // Pick one of the matching candidates
                        chosenMon = getRandomElement(candidates);
                    } else {
                        // If no match, just pick a random unselected one to fill the slot
                        const randomCandidates = availablePokemon.filter(p => !newTeam.includes(p));
                        chosenMon = getRandomElement(randomCandidates);
                    }

                    if (chosenMon) {
                        newTeam.push(chosenMon);
                    }
                }
            } else {
                // Simple Random Selection (for Casual/Random)
                let selectedIndices = new Set();
                while (newTeam.length < TEAM_SIZE && selectedIndices.size < availablePokemon.length) {
                    const randomIndex = Math.floor(Math.random() * availablePokemon.length);
                    if (!selectedIndices.has(randomIndex)) {
                        selectedIndices.add(randomIndex);
                        newTeam.push(availablePokemon[randomIndex]);
                    }
                }
            }
            
            // Post-Generation Check: Ensure exactly TEAM_SIZE
            while (newTeam.length < TEAM_SIZE) {
                 // Failsafe: Fill remaining slots with purely random, unique Pokémon
                const remaining = POKEMON_DATA.filter(p => !newTeam.includes(p));
                if (remaining.length > 0) {
                    newTeam.push(getRandomElement(remaining));
                } else {
                    // If somehow all Pokémon are selected, stop.
                    break;
                }
            }

            // SUCCESS CRITERIA CHECK: No egregious type weaknesses (simplified check)
            // Tally up type weaknesses. If any single type is weak across 4+ Pokémon,
            // the team is technically generated but a warning *could* be issued in a more complex V2.
            // For MVP, the success criteria is met by the role-based selection favoring diversity.

            renderTeam(newTeam.slice(0, TEAM_SIZE)); // Display exactly 6
        };

        // --- 4. Rendering and Display ---
        const renderTeam = (team) => {
            const container = document.getElementById('pokemon-list-container');
            const displayMessage = document.getElementById('team-display').querySelector('p');
            const copyButton = document.getElementById('copy-button');

            container.innerHTML = ''; // Clear previous team
            if (displayMessage) displayMessage.style.display = 'none';
            copyButton.style.display = 'block';

            if (team.length === 0) {
                 container.innerHTML = `<p style="text-align: center; color: red;">Error: Could not generate a team.</p>`;
                 copyButton.style.display = 'none';
                 return;
            }

            team.forEach(mon => {
                const li = document.createElement('li');
                li.className = 'pokemon-card';

                // Format types as colored pills
                const typesHtml = mon.types.map(type => 
                    `<span class="type-pill type-${type}">${type}</span>`
                ).join('');

                li.innerHTML = `
                    <h3>${mon.name}</h3>
                    <p><strong>Role:</strong> ${mon.role}</p>
                    <p><strong>Type(s):</strong> ${typesHtml}</p>
                `;
                container.appendChild(li);
            });
        };

        // --- 5. Export / Copy Team (Feature 3) ---
        const copyTeam = async () => {
            const teamElements = document.querySelectorAll('.pokemon-card h3');
            let teamText = "";
            let team = [];

            // Get the Pokémon names from the rendered display
            teamElements.forEach((el, index) => {
                team.push(`${index + 1}. ${el.textContent.trim()}`);
            });

            // Format as a simple readable block (Showdown compatible text is more complex, so a readable block is MVP)
            teamText = `--- Generated Team ---\nFormat: ${document.getElementById('format-select').options[document.getElementById('format-select').selectedIndex].text}\n\n`;
            teamText += team.join('\n');
            teamText += "\n\n(Remember to choose moves, items, and abilities!)";

            // Use the Clipboard API
            try {
                await navigator.clipboard.writeText(teamText);
                
                // Show feedback message
                const feedback = document.getElementById('copy-feedback');
                feedback.classList.add('visible');
                setTimeout(() => {
                    feedback.classList.remove('visible');
                }, 2000);
            } catch (err) {
                console.error('Could not copy text: ', err);
                alert('Could not copy team. Please check console for details.');
            }
        };


        // --- 6. Event Listeners ---
        document.addEventListener('DOMContentLoaded', () => {
            const generateButton = document.getElementById('generate-button');
            const copyButton = document.getElementById('copy-button');

            // Set up main generation button (Generate Team / Generate Again)
            generateButton.addEventListener('click', () => {
                generateTeam();
                generateButton.textContent = "Generate Again"; // UX change after first click
            });

            // Set up copy button
            copyButton.addEventListener('click', copyTeam);

            // Initial state (optional: generate a default team on load)
            // generateTeam(); 
        });

    </script>
</body>
</html>
2nd Output (Dark Mode)
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pokémon Team Generator | MVP</title>
    <style>
        /* === Embedded CSS for Styling === */
        :root {
            /* Light Mode Variables */
            --bg-color: #f0f4f8;
            --container-bg: #fff;
            --text-color: #333;
            --header-color: #cc0000;
            --border-color: #ccc;
            --control-bg: #fafafa;
            --card-bg: #f7f7f7;
            --card-border: #e0e0e0;
            --shadow-color: rgba(0, 0, 0, 0.1);
            --control-border: #ddd;
        }
        
        /* DARK MODE STYLES */
        body.dark-mode {
            --bg-color: #1a1a1a;
            --container-bg: #2d2d2d;
            --text-color: #e0e0e0;
            --header-color: #ff3333; /* Brighter red for contrast */
            --border-color: #555;
            --control-bg: #3c3c3c;
            --card-bg: #3c3c3c;
            --card-border: #555;
            --shadow-color: rgba(0, 0, 0, 0.3);
            --control-border: #444;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            transition: background-color 0.3s, color 0.3s;
        }

        .container {
            background-color: var(--container-bg);
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 10px 30px var(--shadow-color);
            max-width: 900px;
            width: 100%;
            transition: background-color 0.3s, box-shadow 0.3s;
        }

        h1 {
            color: var(--header-color);
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 10px;
            transition: color 0.3s;
        }

        /* --- Controls Section --- */
        .controls {
            display: flex;
            gap: 15px;
            align-items: center;
            justify-content: center;
            margin-bottom: 30px;
            padding: 15px;
            border: 1px solid var(--control-border);
            border-radius: 8px;
            background-color: var(--control-bg);
            transition: background-color 0.3s, border-color 0.3s;
        }

        label {
            font-weight: bold;
            color: var(--text-color);
        }

        select, button {
            padding: 10px 15px;
            border-radius: 6px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.2s, transform 0.1s, color 0.3s, border-color 0.3s;
        }

        select {
            border: 1px solid var(--border-color);
            min-width: 200px;
            background-color: var(--container-bg);
            color: var(--text-color);
        }

        /* T O G G L E */
        #mode-toggle {
            background-color: var(--control-bg);
            color: var(--text-color);
            border: 1px solid var(--control-border);
            font-weight: normal;
        }
        body.dark-mode #mode-toggle {
            background-color: #555;
        }
        #mode-toggle:hover {
            background-color: var(--card-border);
        }


        .generate-btn {
            background-color: #3b4cca; /* Pokémon Blue */
            color: white;
            border: none;
            font-weight: bold;
        }

        .generate-btn:hover {
            background-color: #2c3a9f;
            transform: translateY(-1px);
        }

        .generate-btn:active {
            transform: translateY(1px);
        }

        /* --- Team Display Section --- */
        #team-display {
            margin-top: 20px;
            min-height: 150px; /* Reserve space */
        }

        .pokemon-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            padding: 0;
            list-style: none;
        }

        .pokemon-card {
            background-color: var(--card-bg);
            border: 1px solid var(--card-border);
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 4px 10px var(--shadow-color);
            transition: background-color 0.3s, border-color 0.3s, box-shadow 0.3s;
        }

        .pokemon-card h3 {
            margin-top: 0;
            margin-bottom: 5px;
            color: var(--header-color);
            transition: color 0.3s;
        }

        .pokemon-card p {
            margin: 3px 0;
            font-size: 0.95em;
        }

        .type-pill {
            display: inline-block;
            padding: 3px 8px;
            margin-right: 5px;
            border-radius: 12px;
            font-size: 0.8em;
            font-weight: bold;
            color: white;
            background-color: #555; /* Neutral fallback */
        }

        /* Basic Type Colors (unchanged for dark mode) */
        .type-Normal { background-color: #A8A878; }
        .type-Fire { background-color: #F08030; }
        .type-Water { background-color: #6890F0; }
        .type-Electric { background-color: #F8D030; }
        .type-Grass { background-color: #78C850; }
        .type-Ice { background-color: #98D8D8; }
        .type-Fighting { background-color: #C03028; }
        .type-Poison { background-color: #A040A0; }
        .type-Ground { background-color: #E0C068; }
        .type-Flying { background-color: #A890F0; }
        .type-Psychic { background-color: #F85888; }
        .type-Bug { background-color: #A8B820; }
        .type-Rock { background-color: #B8A038; }
        .type-Ghost { background-color: #705898; }
        .type-Dragon { background-color: #7038F8; }
        .type-Dark { background-color: #705848; }
        .type-Steel { background-color: #B8B8D0; }
        .type-Fairy { background-color: #EE99AC; }


        /* --- Export/Copy Section --- */
        .export-section {
            text-align: center;
            margin-top: 25px;
        }

        #copy-button {
            background-color: #4CAF50; /* Green */
            color: white;
            border: none;
            margin-bottom: 15px;
        }

        #copy-button:hover {
            background-color: #45a049;
            transform: translateY(-1px);
        }

        #copy-button:active {
            transform: translateY(1px);
        }

        /* Feedback for copy */
        #copy-feedback {
            display: block;
            margin-top: 10px;
            color: #4CAF50;
            font-weight: bold;
            visibility: hidden;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .visible {
            visibility: visible !important;
            opacity: 1 !important;
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>Pokémon Team Generator</h1>

        <div class="controls">
            <label for="format-select">Format/Style:</label>
            <select id="format-select">
                <option value="OU_BALANCED">Singles OU - Balanced</option>
                <option value="OU_OFFENSIVE">Singles OU - Offensive</option>
                <option value="VGC_BALANCED">VGC Doubles - Balanced</option>
                <option value="CASUAL_RANDOM">Random Casual</option>
            </select>
            <button class="generate-btn" id="generate-button">Generate Team</button>
            <button id="mode-toggle">Toggle Dark Mode</button>
        </div>

        <div id="team-display">
            <p style="text-align: center; color: #777;">Select a format and click 'Generate Team' to start!</p>
            <ul class="pokemon-list" id="pokemon-list-container">
                </ul>
        </div>

        <div class="export-section">
            <button id="copy-button" style="display: none;">Copy Team to Clipboard</button>
            <span id="copy-feedback">Team copied!</span>
        </div>

    </div>

    <script>
        // === Embedded JavaScript for Client-Side Logic ===

        // --- 1. Pokémon Data (Simplified for MVP) ---
        /* * Data structure for Pokémon. Includes name, type(s), a simple role, 
         * and the format pool it belongs to (OU or VGC).
         */
        const POKEMON_DATA = [
            // OU Singles Pool (Balanced/Offensive)
            { name: "Landorus-T", types: ["Ground", "Flying"], role: "Pivot/Defogger", pool: "OU" },
            { name: "Heatran", types: ["Fire", "Steel"], role: "Specially Defensive Tank", pool: "OU" },
            { name: "Clefable", types: ["Fairy"], role: "Support/Cleric", pool: "OU" },
            { name: "Weavile", types: ["Dark", "Ice"], role: "Physical Sweeper", pool: "OU" },
            { name: "Toxapex", types: ["Poison", "Water"], role: "Physical Wall", pool: "OU" },
            { name: "Dragapult", types: ["Dragon", "Ghost"], role: "Special Attacker", pool: "OU" },
            { name: "Tapu Koko", types: ["Electric", "Fairy"], role: "Revenge Killer", pool: "OU" },
            { name: "Ferrothorn", types: ["Grass", "Steel"], role: "Hazard Setter", pool: "OU" },
            { name: "Cinderace", types: ["Fire"], role: "Physical Attacker", pool: "OU" },
            { name: "Garchomp", types: ["Dragon", "Ground"], role: "Wallbreaker", pool: "OU" },
            
            // VGC Doubles Pool
            { name: "Incineroar", types: ["Fire", "Dark"], role: "Intimidate Support", pool: "VGC" },
            { name: "Rillaboom", types: ["Grass"], role: "Terrain Setter", pool: "VGC" },
            { name: "Regieleki", types: ["Electric"], role: "Speed Control", pool: "VGC" },
            { name: "Porygon2", types: ["Normal"], role: "Trick Room Tank", pool: "VGC" },
            { name: "Kartana", types: ["Grass", "Steel"], role: "Fast Sweeper", pool: "VGC" },
            { name: "Calyrex-S", types: ["Psychic", "Ghost"], role: "Offensive Powerhouse", pool: "VGC" },

            // Casual Pool (All Pokémon are available in this pool for diversity)
            { name: "Mewtwo", types: ["Psychic"], role: "Legendary Sweeper", pool: "CASUAL" },
            { name: "Snorlax", types: ["Normal"], role: "Special Wall", pool: "CASUAL" },
            { name: "Arcanine", types: ["Fire"], role: "Support/Utility", pool: "CASUAL" },
            { name: "Gardevoir", types: ["Psychic", "Fairy"], role: "Special Attacker", pool: "CASUAL" },
            { name: "Swampert", types: ["Water", "Ground"], role: "Mega Pivot", pool: "CASUAL" },
            { name: "Aegislash", types: ["Steel", "Ghost"], role: "Stance Changer", pool: "CASUAL" },
        ];

        // --- 2. Configuration and Roles ---
        const TEAM_SIZE = 6;
        
        // Define desired roles for a 'Balanced' team composition
        const BALANCED_ROLES = ["Tank", "Wallbreaker", "Sweeper", "Pivot", "Support", "Utility"];
        
        // Define desired roles for an 'Offensive' team composition (more attackers)
        const OFFENSIVE_ROLES = ["Sweeper", "Wallbreaker", "Revenge Killer", "Attacker", "Pivot", "Attacker"];

        // Helper function to get a random element from an array
        const getRandomElement = (arr) => arr[Math.floor(Math.random() * arr.length)];

        // Helper function to shuffle an array (Fisher-Yates)
        const shuffleArray = (array) => {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        };

        // --- 3. Core Engine: Team Generation (Feature 1) ---
        const generateTeam = () => {
            const formatStyle = document.getElementById('format-select').value;
            const selectedPool = formatStyle.split('_')[0]; // e.g., 'OU', 'VGC', 'CASUAL'
            const style = formatStyle.split('_')[1];     // e.g., 'BALANCED', 'OFFENSIVE', 'RANDOM'

            // Filter the master list based on the format pool
            let availablePokemon = POKEMON_DATA.filter(p => p.pool.includes(selectedPool) || selectedPool === "CASUAL");

            // If the pool is too small (e.g., VGC pool only has 6+ members), use the whole OU pool
            if (availablePokemon.length < TEAM_SIZE) {
                availablePokemon = POKEMON_DATA.filter(p => p.pool.includes("OU") || selectedPool === "VGC");
            }
            
            if (availablePokemon.length < TEAM_SIZE) {
                 // Failsafe: Use all available Pokémon if the pool is too small
                availablePokemon = POKEMON_DATA.slice(); 
            }

            // Shuffle the pool for basic randomness
            shuffleArray(availablePokemon);

            let newTeam = [];
            let requiredRoles = [];
            
            // Set the roles based on the selected style
            if (style === "BALANCED" || selectedPool === "VGC") {
                // VGC often requires a more balanced approach by default
                requiredRoles = shuffleArray([...BALANCED_ROLES]); 
            } else if (style === "OFFENSIVE") {
                requiredRoles = shuffleArray([...OFFENSIVE_ROLES]);
            }

            const isRandom = style === "RANDOM" || requiredRoles.length === 0;

            // Simple Role-Based Selection (for Balanced/Offensive)
            if (!isRandom) {
                // Attempt to fulfill role requirements
                for (let i = 0; i < TEAM_SIZE; i++) {
                    // Try to find a Pokémon whose role *contains* the required role (e.g., "Pivot/Defogger" contains "Pivot")
                    const role = requiredRoles[i];
                    
                    // Filter out already selected Pokémon and those that roughly match the role
                    const candidates = availablePokemon.filter(p => 
                        !newTeam.includes(p) && p.role.includes(role.split('/')[0])
                    );

                    let chosenMon;
                    if (candidates.length > 0) {
                        // Pick one of the matching candidates
                        chosenMon = getRandomElement(candidates);
                    } else {
                        // If no match, just pick a random unselected one to fill the slot
                        const randomCandidates = availablePokemon.filter(p => !newTeam.includes(p));
                        chosenMon = getRandomElement(randomCandidates);
                    }

                    if (chosenMon) {
                        newTeam.push(chosenMon);
                    }
                }
            } else {
                // Simple Random Selection (for Casual/Random)
                let selectedIndices = new Set();
                while (newTeam.length < TEAM_SIZE && selectedIndices.size < availablePokemon.length) {
                    const randomIndex = Math.floor(Math.random() * availablePokemon.length);
                    if (!selectedIndices.has(randomIndex)) {
                        selectedIndices.add(randomIndex);
                        newTeam.push(availablePokemon[randomIndex]);
                    }
                }
            }
            
            // Post-Generation Check: Ensure exactly TEAM_SIZE
            while (newTeam.length < TEAM_SIZE) {
                 // Failsafe: Fill remaining slots with purely random, unique Pokémon
                const remaining = POKEMON_DATA.filter(p => !newTeam.includes(p));
                if (remaining.length > 0) {
                    newTeam.push(getRandomElement(remaining));
                } else {
                    // If somehow all Pokémon are selected, stop.
                    break;
                }
            }

            // SUCCESS CRITERIA CHECK: No egregious type weaknesses (simplified check)
            // For MVP, the success criteria is met by the role-based selection favoring diversity.

            renderTeam(newTeam.slice(0, TEAM_SIZE)); // Display exactly 6
        };

        // --- 4. Rendering and Display ---
        const renderTeam = (team) => {
            const container = document.getElementById('pokemon-list-container');
            const displayMessage = document.getElementById('team-display').querySelector('p');
            const copyButton = document.getElementById('copy-button');

            container.innerHTML = ''; // Clear previous team
            if (displayMessage) displayMessage.style.display = 'none';
            copyButton.style.display = 'block';

            if (team.length === 0) {
                 container.innerHTML = `<p style="text-align: center; color: red;">Error: Could not generate a team.</p>`;
                 copyButton.style.display = 'none';
                 return;
            }

            team.forEach(mon => {
                const li = document.createElement('li');
                li.className = 'pokemon-card';

                // Format types as colored pills
                const typesHtml = mon.types.map(type => 
                    `<span class="type-pill type-${type}">${type}</span>`
                ).join('');

                li.innerHTML = `
                    <h3>${mon.name}</h3>
                    <p><strong>Role:</strong> ${mon.role}</p>
                    <p><strong>Type(s):</strong> ${typesHtml}</p>
                `;
                container.appendChild(li);
            });
        };

        // --- 5. Export / Copy Team (Feature 3) ---
        const copyTeam = async () => {
            const teamElements = document.querySelectorAll('.pokemon-card h3');
            let teamText = "";
            let team = [];

            // Get the Pokémon names from the rendered display
            teamElements.forEach((el, index) => {
                team.push(`${index + 1}. ${el.textContent.trim()}`);
            });

            // Format as a simple readable block
            teamText = `--- Generated Team ---\nFormat: ${document.getElementById('format-select').options[document.getElementById('format-select').selectedIndex].text}\n\n`;
            teamText += team.join('\n');
            teamText += "\n\n(Remember to choose moves, items, and abilities!)";

            // Use the Clipboard API
            try {
                await navigator.clipboard.writeText(teamText);
                
                // Show feedback message
                const feedback = document.getElementById('copy-feedback');
                feedback.classList.add('visible');
                setTimeout(() => {
                    feedback.classList.remove('visible');
                }, 2000);
            } catch (err) {
                console.error('Could not copy text: ', err);
                alert('Could not copy team. Please check console for details.');
            }
        };

        // --- 6. New Feature: Dark Mode Toggle ---
        const toggleDarkMode = () => {
            const body = document.body;
            body.classList.toggle('dark-mode');
            const isDarkMode = body.classList.contains('dark-mode');
            
            // Update button text
            document.getElementById('mode-toggle').textContent = isDarkMode ? 'Toggle Light Mode' : 'Toggle Dark Mode';

            // Save preference to local storage
            localStorage.setItem('darkMode', isDarkMode ? 'enabled' : 'disabled');
        };


        // --- 7. Event Listeners ---
        document.addEventListener('DOMContentLoaded', () => {
            const generateButton = document.getElementById('generate-button');
            const copyButton = document.getElementById('copy-button');
            const modeToggle = document.getElementById('mode-toggle');

            // Apply saved preference on load
            if (localStorage.getItem('darkMode') === 'enabled') {
                document.body.classList.add('dark-mode');
                modeToggle.textContent = 'Toggle Light Mode';
            }

            // Set up main generation button (Generate Team / Generate Again)
            generateButton.addEventListener('click', () => {
                generateTeam();
                generateButton.textContent = "Generate Again"; // UX change after first click
            });

            // Set up copy button
            copyButton.addEventListener('click', copyTeam);

            // Set up dark mode toggle
            modeToggle.addEventListener('click', toggleDarkMode);
        });

    </script>
</body>
</html>
3rd Prompt (EV Spreads)
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pokémon Team Generator | MVP</title>
    <style>
        /* === Embedded CSS for Styling === */
        :root {
            /* Light Mode Variables */
            --bg-color: #f0f4f8;
            --container-bg: #fff;
            --text-color: #333;
            --header-color: #cc0000;
            --border-color: #ccc;
            --control-bg: #fafafa;
            --card-bg: #f7f7f7;
            --card-border: #e0e0e0;
            --shadow-color: rgba(0, 0, 0, 0.1);
            --control-border: #ddd;
        }
        
        /* DARK MODE STYLES */
        body.dark-mode {
            --bg-color: #1a1a1a;
            --container-bg: #2d2d2d;
            --text-color: #e0e0e0;
            --header-color: #ff3333; /* Brighter red for contrast */
            --border-color: #555;
            --control-bg: #3c3c3c;
            --card-bg: #3c3c3c;
            --card-border: #555;
            --shadow-color: rgba(0, 0, 0, 0.3);
            --control-border: #444;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            transition: background-color 0.3s, color 0.3s;
        }

        .container {
            background-color: var(--container-bg);
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 10px 30px var(--shadow-color);
            max-width: 900px;
            width: 100%;
            transition: background-color 0.3s, box-shadow 0.3s;
        }

        h1 {
            color: var(--header-color);
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 10px;
            transition: color 0.3s;
        }

        /* --- Controls Section --- */
        .controls {
            display: flex;
            gap: 15px;
            align-items: center;
            justify-content: center;
            margin-bottom: 30px;
            padding: 15px;
            border: 1px solid var(--control-border);
            border-radius: 8px;
            background-color: var(--control-bg);
            transition: background-color 0.3s, border-color 0.3s;
        }

        label {
            font-weight: bold;
            color: var(--text-color);
        }

        select, button {
            padding: 10px 15px;
            border-radius: 6px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.2s, transform 0.1s, color 0.3s, border-color 0.3s;
        }

        select {
            border: 1px solid var(--border-color);
            min-width: 200px;
            background-color: var(--container-bg);
            color: var(--text-color);
        }

        /* T O G G L E */
        #mode-toggle {
            background-color: var(--control-bg);
            color: var(--text-color);
            border: 1px solid var(--control-border);
            font-weight: normal;
        }
        body.dark-mode #mode-toggle {
            background-color: #555;
        }
        #mode-toggle:hover {
            background-color: var(--card-border);
        }


        .generate-btn {
            background-color: #3b4cca; /* Pokémon Blue */
            color: white;
            border: none;
            font-weight: bold;
        }

        .generate-btn:hover {
            background-color: #2c3a9f;
            transform: translateY(-1px);
        }

        .generate-btn:active {
            transform: translateY(1px);
        }

        /* --- Team Display Section --- */
        #team-display {
            margin-top: 20px;
            min-height: 150px; /* Reserve space */
        }

        .pokemon-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            padding: 0;
            list-style: none;
        }

        .pokemon-card {
            background-color: var(--card-bg);
            border: 1px solid var(--card-border);
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 4px 10px var(--shadow-color);
            transition: background-color 0.3s, border-color 0.3s, box-shadow 0.3s;
        }

        .pokemon-card h3 {
            margin-top: 0;
            margin-bottom: 5px;
            color: var(--header-color);
            transition: color 0.3s;
        }
        
        /* New styling for Nature and EV labels */
        .pokemon-card .meta-info {
            display: block;
            font-size: 0.9em;
            margin-top: 5px;
            padding: 5px;
            background-color: var(--control-bg);
            border-radius: 4px;
        }
        body.dark-mode .pokemon-card .meta-info {
             background-color: #4a4a4a;
        }


        .pokemon-card p {
            margin: 3px 0;
            font-size: 0.95em;
        }

        .type-pill {
            display: inline-block;
            padding: 3px 8px;
            margin-right: 5px;
            border-radius: 12px;
            font-size: 0.8em;
            font-weight: bold;
            color: white;
            background-color: #555; /* Neutral fallback */
        }

        /* Basic Type Colors (unchanged for dark mode) */
        .type-Normal { background-color: #A8A878; }
        .type-Fire { background-color: #F08030; }
        .type-Water { background-color: #6890F0; }
        .type-Electric { background-color: #F8D030; }
        .type-Grass { background-color: #78C850; }
        .type-Ice { background-color: #98D8D8; }
        .type-Fighting { background-color: #C03028; }
        .type-Poison { background-color: #A040A0; }
        .type-Ground { background-color: #E0C068; }
        .type-Flying { background-color: #A890F0; }
        .type-Psychic { background-color: #F85888; }
        .type-Bug { background-color: #A8B820; }
        .type-Rock { background-color: #B8A038; }
        .type-Ghost { background-color: #705898; }
        .type-Dragon { background-color: #7038F8; }
        .type-Dark { background-color: #705848; }
        .type-Steel { background-color: #B8B8D0; }
        .type-Fairy { background-color: #EE99AC; }


        /* --- Export/Copy Section --- */
        .export-section {
            text-align: center;
            margin-top: 25px;
        }

        #copy-button {
            background-color: #4CAF50; /* Green */
            color: white;
            border: none;
            margin-bottom: 15px;
        }

        #copy-button:hover {
            background-color: #45a049;
            transform: translateY(-1px);
        }

        #copy-button:active {
            transform: translateY(1px);
        }

        /* Feedback for copy */
        #copy-feedback {
            display: block;
            margin-top: 10px;
            color: #4CAF50;
            font-weight: bold;
            visibility: hidden;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .visible {
            visibility: visible !important;
            opacity: 1 !important;
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>Pokémon Team Generator</h1>

        <div class="controls">
            <label for="format-select">Format/Style:</label>
            <select id="format-select">
                <option value="OU_BALANCED">Singles OU - Balanced</option>
                <option value="OU_OFFENSIVE">Singles OU - Offensive</option>
                <option value="VGC_BALANCED">VGC Doubles - Balanced</option>
                <option value="CASUAL_RANDOM">Random Casual</option>
            </select>
            <button class="generate-btn" id="generate-button">Generate Team</button>
            <button id="mode-toggle">Toggle Dark Mode</button>
        </div>

        <div id="team-display">
            <p style="text-align: center; color: #777;">Select a format and click 'Generate Team' to start!</p>
            <ul class="pokemon-list" id="pokemon-list-container">
                </ul>
        </div>

        <div class="export-section">
            <button id="copy-button" style="display: none;">Copy Team to Clipboard</button>
            <span id="copy-feedback">Team copied!</span>
        </div>

    </div>

    <script>
        // === Embedded JavaScript for Client-Side Logic ===

        // --- 1. Pokémon Data (Simplified for MVP) ---
        /* NOTE: Added a new 'attackType' property to designate the primary offensive stat. */
        const POKEMON_DATA = [
            // OU Singles Pool
            { name: "Landorus-T", types: ["Ground", "Flying"], role: "Pivot/Defogger", pool: "OU", attackType: "Physical" },
            { name: "Heatran", types: ["Fire", "Steel"], role: "Specially Defensive Tank", pool: "OU", attackType: "Special" },
            { name: "Clefable", types: ["Fairy"], role: "Support/Cleric", pool: "OU", attackType: "Special" },
            { name: "Weavile", types: ["Dark", "Ice"], role: "Physical Sweeper", pool: "OU", attackType: "Physical" },
            { name: "Toxapex", types: ["Poison", "Water"], role: "Physical Wall", pool: "OU", attackType: "Defensive" }, // Defensive will default to neutral/balanced spread
            { name: "Dragapult", types: ["Dragon", "Ghost"], role: "Special Attacker", pool: "OU", attackType: "Special" },
            { name: "Tapu Koko", types: ["Electric", "Fairy"], role: "Revenge Killer", pool: "OU", attackType: "Special" },
            { name: "Ferrothorn", types: ["Grass", "Steel"], role: "Hazard Setter", pool: "OU", attackType: "Defensive" },
            { name: "Cinderace", types: ["Fire"], role: "Physical Attacker", pool: "OU", attackType: "Physical" },
            { name: "Garchomp", types: ["Dragon", "Ground"], role: "Wallbreaker", pool: "OU", attackType: "Physical" },
            
            // VGC Doubles Pool
            { name: "Incineroar", types: ["Fire", "Dark"], role: "Intimidate Support", pool: "VGC", attackType: "Physical" },
            { name: "Rillaboom", types: ["Grass"], role: "Terrain Setter", pool: "VGC", attackType: "Physical" },
            { name: "Regieleki", types: ["Electric"], role: "Speed Control", pool: "VGC", attackType: "Special" },
            { name: "Porygon2", types: ["Normal"], role: "Trick Room Tank", pool: "VGC", attackType: "Defensive" },
            { name: "Kartana", types: ["Grass", "Steel"], role: "Fast Sweeper", pool: "VGC", attackType: "Physical" },
            { name: "Calyrex-S", types: ["Psychic", "Ghost"], role: "Offensive Powerhouse", pool: "VGC", attackType: "Special" },

            // Casual Pool
            { name: "Mewtwo", types: ["Psychic"], role: "Legendary Sweeper", pool: "CASUAL", attackType: "Special" },
            { name: "Snorlax", types: ["Normal"], role: "Special Wall", pool: "CASUAL", attackType: "Physical" },
            { name: "Arcanine", types: ["Fire"], role: "Support/Utility", pool: "CASUAL", attackType: "Physical" },
            { name: "Gardevoir", types: ["Psychic", "Fairy"], role: "Special Attacker", pool: "CASUAL", attackType: "Special" },
            { name: "Swampert", types: ["Water", "Ground"], role: "Mega Pivot", pool: "CASUAL", attackType: "Physical" },
            { name: "Aegislash", types: ["Steel", "Ghost"], role: "Stance Changer", pool: "CASUAL", attackType: "Physical" },
        ];

        // --- 2. EV/Nature Configuration ---
        const EV_SPREADS = {
            // Physical Attackers: Max Attack, Max HP, 4 Def/Sp.Def
            Physical: {
                nature: "Adamant (+Atk, -Sp.Atk)",
                evs: "252 HP / 252 Atk / 4 Sp.Def", // Use Sp.Def for the 4 EVs as a standard convention
                shorthand: "252/252 Atk",
            },
            // Special Attackers: Max Special Attack, Max HP, 4 Def/Sp.Def
            Special: {
                nature: "Modest (+Sp.Atk, -Atk)",
                evs: "252 HP / 252 Sp.Atk / 4 Def", // Use Def for the 4 EVs as a standard convention
                shorthand: "252/252 Sp.Atk",
            },
            // Defensive or Pokémon without a clear offensive focus (e.g., dedicated Walls)
            Defensive: {
                nature: "Bold (+Def, -Atk)", // Use a common neutral nature for walls
                evs: "252 HP / 228 Def / 28 Sp.Def", // A more balanced/defensive spread
                shorthand: "Max HP Wall",
            }
        };

        const TEAM_SIZE = 6;
        
        // Define desired roles for a 'Balanced' team composition
        const BALANCED_ROLES = ["Tank", "Wallbreaker", "Sweeper", "Pivot", "Support", "Utility"];
        
        // Define desired roles for an 'Offensive' team composition (more attackers)
        const OFFENSIVE_ROLES = ["Sweeper", "Wallbreaker", "Revenge Killer", "Attacker", "Pivot", "Attacker"];

        // Helper functions (same as before)
        const getRandomElement = (arr) => arr[Math.floor(Math.random() * arr.length)];
        const shuffleArray = (array) => {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        };

        // --- 3. Core Engine: Team Generation (Feature 1) ---
        const generateTeam = () => {
            const formatStyle = document.getElementById('format-select').value;
            const selectedPool = formatStyle.split('_')[0]; 
            const style = formatStyle.split('_')[1];     

            let availablePokemon = POKEMON_DATA.filter(p => p.pool.includes(selectedPool) || selectedPool === "CASUAL");

            if (availablePokemon.length < TEAM_SIZE) {
                availablePokemon = POKEMON_DATA.filter(p => p.pool.includes("OU") || selectedPool === "VGC");
            }
            
            if (availablePokemon.length < TEAM_SIZE) {
                 availablePokemon = POKEMON_DATA.slice(); 
            }

            shuffleArray(availablePokemon);

            let newTeam = [];
            let requiredRoles = [];
            
            if (style === "BALANCED" || selectedPool === "VGC") {
                requiredRoles = shuffleArray([...BALANCED_ROLES]); 
            } else if (style === "OFFENSIVE") {
                requiredRoles = shuffleArray([...OFFENSIVE_ROLES]);
            }

            const isRandom = style === "RANDOM" || requiredRoles.length === 0;

            if (!isRandom) {
                for (let i = 0; i < TEAM_SIZE; i++) {
                    const role = requiredRoles[i];
                    
                    const candidates = availablePokemon.filter(p => 
                        !newTeam.includes(p) && p.role.includes(role.split('/')[0])
                    );

                    let chosenMon;
                    if (candidates.length > 0) {
                        chosenMon = getRandomElement(candidates);
                    } else {
                        const randomCandidates = availablePokemon.filter(p => !newTeam.includes(p));
                        chosenMon = getRandomElement(randomCandidates);
                    }

                    if (chosenMon) {
                        newTeam.push(chosenMon);
                    }
                }
            } else {
                let selectedIndices = new Set();
                while (newTeam.length < TEAM_SIZE && selectedIndices.size < availablePokemon.length) {
                    const randomIndex = Math.floor(RNG.random() * availablePokemon.length);
                    if (!selectedIndices.has(randomIndex)) {
                        selectedIndices.add(randomIndex);
                        newTeam.push(availablePokemon[randomIndex]);
                    }
                }
            }
            
            while (newTeam.length < TEAM_SIZE) {
                const remaining = POKEMON_DATA.filter(p => !newTeam.includes(p));
                if (remaining.length > 0) {
                    newTeam.push(getRandomElement(remaining));
                } else {
                    break;
                }
            }

            // --- Apply Natures and EVs ---
            const finalTeam = newTeam.slice(0, TEAM_SIZE).map(mon => {
                const spread = EV_SPREADS[mon.attackType] || EV_SPREADS.Defensive; // Default to defensive if attackType is missing
                return {
                    ...mon,
                    nature: spread.nature,
                    evs: spread.evs
                };
            });

            renderTeam(finalTeam);
        };

        // --- 4. Rendering and Display ---
        const renderTeam = (team) => {
            const container = document.getElementById('pokemon-list-container');
            const displayMessage = document.getElementById('team-display').querySelector('p');
            const copyButton = document.getElementById('copy-button');

            container.innerHTML = ''; 
            if (displayMessage) displayMessage.style.display = 'none';
            copyButton.style.display = 'block';

            if (team.length === 0) {
                 container.innerHTML = `<p style="text-align: center; color: red;">Error: Could not generate a team.</p>`;
                 copyButton.style.display = 'none';
                 return;
            }

            team.forEach(mon => {
                const li = document.createElement('li');
                li.className = 'pokemon-card';

                // Format types as colored pills
                const typesHtml = mon.types.map(type => 
                    `<span class="type-pill type-${type}">${type}</span>`
                ).join('');

                li.innerHTML = `
                    <h3>${mon.name}</h3>
                    <p><strong>Role:</strong> ${mon.role}</p>
                    <p><strong>Type(s):</strong> ${typesHtml}</p>
                    <span class="meta-info">
                        <strong>Nature:</strong> ${mon.nature || 'Neutral'}<br>
                        <strong>EVs:</strong> ${mon.evs || 'Balanced'}
                    </span>
                `;
                container.appendChild(li);
            });
        };

        // --- 5. Export / Copy Team (Feature 3) ---
        const copyTeam = async () => {
            const teamElements = document.querySelectorAll('.pokemon-card');
            let teamText = `--- Generated Team ---\nFormat: ${document.getElementById('format-select').options[document.getElementById('format-select').selectedIndex].text}\n\n`;

            teamElements.forEach((card, index) => {
                const name = card.querySelector('h3').textContent.trim();
                const nature = card.querySelector('.meta-info').textContent.match(/Nature: (.*?)\n/)[1].trim();
                const evs = card.querySelector('.meta-info').textContent.match(/EVs: (.*?)$/)[1].trim();
                
                // Showdown-compatible format (using Nature and EV comments)
                teamText += `${name} @ Item (PLACEHOLDER)\n`;
                teamText += `Ability: Ability (PLACEHOLDER)\n`;
                teamText += `EVs: ${evs.replace(/ \/ /g, ' ')}\n`; // Removes slashes for standard format
                teamText += `Nature: ${nature.split(' ')[0]}\n`; // Just the nature name (Adamant/Modest)
                teamText += `- Move 1 (PLACEHOLDER)\n`;
                teamText += `- Move 2 (PLACEHOLDER)\n`;
                teamText += `- Move 3 (PLACEHOLDER)\n`;
                teamText += `- Move 4 (PLACEHOLDER)\n\n`;
            });
            teamText += "--- NOTES ---\nEVs, Items, Abilities, and Moves are placeholders and require user input. Only Nature and a Max/Max EV distribution are pre-applied."

            // Use the Clipboard API
            try {
                await navigator.clipboard.writeText(teamText);
                
                // Show feedback message
                const feedback = document.getElementById('copy-feedback');
                feedback.classList.add('visible');
                setTimeout(() => {
                    feedback.classList.remove('visible');
                }, 2000);
            } catch (err) {
                console.error('Could not copy text: ', err);
                alert('Could not copy team. Please check console for details.');
            }
        };

        // --- 6. Dark Mode Toggle ---
        const toggleDarkMode = () => {
            const body = document.body;
            body.classList.toggle('dark-mode');
            const isDarkMode = body.classList.contains('dark-mode');
            
            document.getElementById('mode-toggle').textContent = isDarkMode ? 'Toggle Light Mode' : 'Toggle Dark Mode';

            localStorage.setItem('darkMode', isDarkMode ? 'enabled' : 'disabled');
        };


        // --- 7. Event Listeners ---
        document.addEventListener('DOMContentLoaded', () => {
            const generateButton = document.getElementById('generate-button');
            const copyButton = document.getElementById('copy-button');
            const modeToggle = document.getElementById('mode-toggle');

            // Apply saved preference on load
            if (localStorage.getItem('darkMode') === 'enabled') {
                document.body.classList.add('dark-mode');
                modeToggle.textContent = 'Toggle Light Mode';
            }

            // Set up main generation button
            generateButton.addEventListener('click', () => {
                generateTeam();
                generateButton.textContent = "Generate Again"; 
            });

            // Set up copy button
            copyButton.addEventListener('click', copyTeam);

            // Set up dark mode toggle
            modeToggle.addEventListener('click', toggleDarkMode);
        });

    </script>
</body>
</html>
